{% load i18n %}
<section class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
  <div class="p-5 sm:p-6">
    <h2 class="text-lg font-bold text-gray-900 dark:text-white">{% translate "Two-Factor Auth" %}</h2>
    <p class="text-subtitle mt-1">{% translate "Add an extra layer of security to your account." %}</p>

    <div class="mt-4">
      {% if user_has_valid_totp_device %}
        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">{% translate "You already have two-factor authentication enabled." %}</p>
        <div class="mt-4">
          <a href="{% url 'mfa_index' %}" class="inline-flex items-center justify-center gap-2 text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-semibold px-4 py-2 transition-colors cursor-pointer btn-press">
            {% translate "Configure" %}
          </a>
        </div>
      {% else %}
        {% if user.has_verified_email %}
          <p class="text-sm font-medium text-gray-700 dark:text-gray-200">{% translate "You do not have two-factor authentication enabled." %}</p>
          <div class="mt-4">
            <a href="{% url 'mfa_activate_totp' %}" class="inline-flex items-center justify-center gap-2 text-white bg-primary-600 hover:bg-primary-700 dark:bg-primary-600 dark:hover:bg-primary-700 rounded-lg text-sm font-semibold px-4 py-2 transition-colors cursor-pointer">
              {% translate "Enable" %}
            </a>
          </div>
        {% else %}
          <p class="text-sm font-medium text-gray-700 dark:text-gray-200">{% translate "To set up two-factor authentication you must first verify your email address." %}</p>
          <div class="mt-4">
            <a href="{% url 'account_email' %}" class="inline-flex items-center justify-center gap-2 text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-semibold px-4 py-2 transition-colors cursor-pointer btn-press">
              {% translate "Verify" %}
            </a>
          </div>
        {% endif %}
      {% endif %}
    </div>
  </div>
</section>
