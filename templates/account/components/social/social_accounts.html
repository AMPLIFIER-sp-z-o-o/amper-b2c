{% load i18n %}
{% load static %}
<section class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden">
  <div class="p-5 sm:p-6">
    <h2 class="text-lg font-bold text-gray-900 dark:text-white">{% translate "Connected Accounts" %}</h2>
    <p class="text-subtitle mt-1">{% translate "Manage sign-in providers linked to your account." %}</p>

    <div class="mt-4 space-y-3">
      {% for base_account in social_accounts %}
        {% with base_account.get_provider_account as account %}
          <div class="flex items-center gap-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/30 px-3 py-2">
            {% if base_account.provider == 'google' %}
              <img class="w-5 h-5" src="{% static 'images/socialauth/google-logo.svg' %}" alt="Google">
              <p class="text-sm font-medium text-gray-700 dark:text-gray-200 truncate">{{ base_account.extra_data.email }}</p>
            {% elif base_account.provider == 'twitter' %}
              <img class="w-5 h-5" src="{% static 'images/socialauth/twitter-logo.svg' %}" alt="Twitter">
              <a href="{{ account.get_profile_url }}" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-primary-700 dark:text-primary-400 hover:underline truncate">@{{ account.get_screen_name }}</a>
            {% elif base_account.provider == 'github' %}
              <img class="w-5 h-5" src="{% static 'images/socialauth/github-logo.svg' %}" alt="GitHub">
              <a href="{{ account.get_profile_url }}" target="_blank" rel="noopener noreferrer" class="text-sm font-medium text-primary-700 dark:text-primary-400 hover:underline truncate">@{{ account.account.extra_data.login }}</a>
            {% else %}
              <p class="text-sm font-medium text-gray-700 dark:text-gray-200 truncate">{{ account.get_brand.name }} â€” {{ account }}</p>
            {% endif %}
          </div>
        {% endwith %}
      {% empty %}
        <p class="text-sm font-medium text-gray-700 dark:text-gray-200">{% translate "You haven't linked any social accounts yet." %}</p>
      {% endfor %}
    </div>

    <div class="mt-4 flex flex-wrap gap-2">
      <a class="inline-flex items-center justify-center gap-2 text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-semibold px-4 py-2 transition-colors cursor-pointer btn-press" href="{% url 'socialaccount_connections' %}">
        {% translate "Manage accounts" %}
      </a>
      {% if not user.has_usable_password %}
      <a class="inline-flex items-center justify-center gap-2 text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-semibold px-4 py-2 transition-colors cursor-pointer btn-press" href="{% url 'account_set_password' %}">
        {% translate "Add a password" %}
      </a>
      {% endif %}
    </div>
  </div>
</section>
